
export interface Location {
    x: number;
    y: number;
    dx: number;
    dy: number;
}

const testMap = 
`....#.....
.........#
..........
..#.......
.......#..
..........
.#..^.....
........#.
#.........
......#...`

const randoMap =
`########
#......#
...^...#
########`

const fullMap =
`....................................#.............#...............#..............................................................#
........................#....#............................................##.......#...................................#..........
.........#...............................................#..#.......#...#...........#......................#......................
...........#...........#...................#...........#.........................................#............................#...
................................................................#.....#...............................................#........#..
......................#..........#.#.......................................#...#........................................#.........
....#.......................#............#............#....#....................................................................#.
#.........#....................#.............#......................#............#....#..#................#........#.#.....#......
.................##...................#.................................#.........................................................
...........#...................................................................##..........#..........#.....#...............#.....
..................................#.........#....................................#....#..#...........................#............
............#.....#............................................................#......................#........#........#.........
.........#.........#......#...#.........#..............................................................................#..........
.........#..............................#..............#...........#.......................................#....#.............#...
...................................................................................................#..........#...................
....#.........#......................#..........#.........................................................................#......#
..............#.#........#..#......#..............................................................................................
#....#....#........................#...#...........................................#.....................#..#.......#...#.........
...............................#.........#........#.....................................#.........................................
................................#.....#..........#..........................................................#.....................
...#.......#...........#.....................................................#.....#...#.#..#...............#.#...................
...#...............#..#..................#.........................#................................................#.............
.#................#................................................#.#...........................#.............#................#.
....................#...............#..............#.........................................................#................#...
...............................................................................................#..........#.......................
............#......................................#....................................................#.........................
.......#.....#..................#....................................................................#..................#.....#...
...........#..........................................#.#.........................................................................
..........#..............................#.................................................................#..............#.......
...............#.........#...........#..........................................................................#.................
...............##................................................................##...#....................#....................#.
............##..........................................................................#....#............#.......................
........#.............#.#..#......#..#...........................#........#...........................#....................#......
...............................................................#........................#.#...................................#...
..#.....#.#............................#..........................................................................................
............................................#.#...........#....#............#.....#.......#..............#...................#....
..........................#............................#.#........................#......................#....#...................
..................#.......................#....#....................................#....................................#........
................#............................................#..............#...............................................#.#...
.............#.......................#...#............#...........................................................#..............#
#.#...#.............................................................#.#...........................................................
....#.............#..#.............................................#.............................#................................
..........................................#........#....#.........................#......................................#........
............................#..........#...........................#.......................................#......................
...#.......#..............#...........................#................................................#.......................#..
.#...............................#......................#...................#.........#...........................................
.#.....#......#........................#........#...............#..............................................#..........#.......
...........................................................................................................................#......
........................#......................................#............#.....................................................
........#.....#........#...............#.............#....#..........................................#.#.........................#
...........#........#.......#.........................................#.............................................#.............
.........#......#..........................................................................................#.....#................
........................................#...#...............#..................................#...........#......................
.......................................#.......#.#....#...#.................#.....#......^#.......................................
.#............#......#..........................................#.#......................................#............#.......#...
.................#.......#.........#........#..........................................................................#.....#....
...#..............................#.................#.........................#.........#.........................................
...#.................................................#..............#......................................................#......
....................#.#...............................#................#.....##...................................................
.........#...#....#.............................#.........#....#.....##............................#........#.....................
........#....#..............................#..................................................................#....#......#......
..........................#..#...........#..............#...............#....#..........#.........................................
...........#..........#...........................................#.......................##......................................
.............................................................................................#...................#...........#....
...............................#................#.....#...#..#....#...............................................................
#...#........#...#...................#.......#......................................................................#.............
#..................#..................................................................................#....................#..#..#
.#............#..#...........#................#.......#........#.........#...........#..............#.............................
.......................................#....#........#..............................................#..........#..................
...#....#........................................#....#...........................................................#....#.......#..
..............#....#.......................................#.............#..#.................................#...................
........................................#.#.......................#.#.......................................#.....................
......................#...#....................................................................................#.................#
........#...#...........#.....................#......#..........................................#.....................#.....#.....
...#......................#..........#............................................................................................
..............................................................................#..........#.....#..........#...#...................
........#............#.............#........##..................................................#...#.............................
..#....................................................................#.................#..........#.......#.........##..........
...................#.....................................................#......................#...#..#............#.............
......................................##.........#........................................................#...........#...........
..#..................................................#........................#...................#...............#...............
....#...................................#........#........................................................#.....................#.
....#.#......#..........................................#........................#................................................
#........................#.....................................................................................#...#..............
.#.............................#.......#...............#............#............#.....#.....#........#......#....................
....#......................................................#.......................................................#.......#...#..
............#.........................#.......##..............................#...................#.....#......#..................
........................................................................................#........................#.........#......
.#.......................#.........................#................#..##.........#..#.....................................#......
#...............#................#...#........#.........#......................#...................................#......#.#.....
................#............................##...................................#............#.....................#............
..#...#.................................................................#.........#.........................##................#...
...........................................#.................#............................#..#..............#......#.#............
.................#...........#..................#................#........#...............................#.................#..#.#
.......#.......................#................................#.#...............................................................
.......#.........#.........#...........................................................................#.........#...........#....
.....#.#................................................#.......#..........#......................................................
......................#.........................................#................#...............................#................
..........................#....#.......#....#.................#.#.................................................##...#..#.......
......................................................#.......#..#.....#............#...#..................................#......
.........#.#...............................#..........#...............................#...............#......................#....
..#...........................#.............................#............#...............#......#........................#........
.........#................................................................#....#..#.....##................#.........#.......#.....
...#....................................#...........#.............#...........................................#...................
#.........................#..........#.....................#......#.............#...........#...................................##
....................#......#...#.#.............................................#.............................#..............#.....
.....................#...#.....#......#.............................#........#......#.............#...............................
..................#.............................................................................#..............#..................
.......#...........................#........................................................................#...............#.....
............................................#......................................#..............................................
.....#..........#..................#.............#................................................#..................#...#......##
..............................................................#........................................#...............#..........
...................................#.#........................................................#.#...........#.....................
...#....................#........#.....................#..................................#..............#..#.....................
.................#....................#...#.....#..........#......#...........................#.#............................#.#..
....................................................#.............#..#.....#......................................................
.......#..............................#...............................................#.........................#.......#.........
........#...............#.................................................................................................#......#
#.#.#..............................................................#..............#................#...........#..........#.......
..#.....................................#...........#................................................#................#......#....
#.........................................................#...#................................#......#.#..........#..............
.#...#................#......#................##...#.........#.............#........#.........#........#.....#....................
................#..........................#.#................................................#.............#.....................
..............#................................................................#.............................#.............#......
..................................#...................................#...........................................................
........#.................#....#.........................................................................................#........
...........#...................#........#.......#................................................#..#......#..#...................
.........#.....#......................................................................#.........................#.....#...........
..........................................................#.............................................#.....#...................
...............#.##.................#....#.................#...#.......................#...................#........#.............`

function parseMap(map: string): string[][] {
    return map.split('\n').map(row => row.split(''));
}

function removeGuard(map: string[][]) {
    return map.map(row => row.map(cell => cell === '^' ? '.' : cell));
}

function findGuard(map: string[][]): Location {

    for (let y = 0; y < map.length; y++) {
        for (let x = 0; x < map[y].length; x++) {
            if (map[y][x] === '^') {
                return {x, y, dx: 0, dy: -1};
            }
        }
    }

    throw Error("Guard not found");
}

export const map: string[][] = removeGuard(parseMap(fullMap));
export const location: Location = findGuard(parseMap(fullMap));